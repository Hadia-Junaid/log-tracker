define(['exports', 'preact/jsx-runtime', 'preact/hooks', './positionUtils-6e4daa31', './Floating-ae9845d4', './Layer-139c23c4', 'preact/compat', './LayerHost-733ade2f', './tabbableUtils-428c264e', './clientHints-fff66be9', './useAnimation-5a74955f', './animationUtils-716a9aa6', './useUser-797287de', './useTestId-c286f212', './useBreakpointValues-3a067093', './useResizeObserver-275c3e83', './useComponentTheme-5aa41a8f', './classNames-08d99695', './UNSAFE_DrawerLayout/themes/redwood/DrawerLayoutTheme', './useFloating-f9bd3c51', './refUtils-d354a169', './useOutsideClick-43ce7043', './arrayUtils-6ee96a35', './useModal-536cb7ff', './utils-32e81a13', './Common/themes/themeContract.css', './colorUtils-7c069766', './_curry1-df649359', './UNSAFE_Floating/themes/redwood/FloatingTheme', './UNSAFE_Floating/themes/FloatingStyles.css', 'css!./FloatingStyles.styles.css', './UNSAFE_Floating/themes/redwood/FloatingBaseTheme.css', 'module', './UNSAFE_Floating/themes/redwood/FloatingVariants.css', './vanilla-extract-recipes-createRuntimeFn.esm-d881c69a', './vanilla-extract-dynamic.esm-eceadd82', './UNSAFE_Floating/themes/FloatingContract.css', './UNSAFE_Layer/themes/LayerStyles.css', 'css!./LayerStyles.styles.css', './useThemeInterpolations-f8cbec71', './useColorScheme-6b864d5c', './useScale-716d3432', './theme-a8f3d819', './Theme-d945adae', './mergeInterpolations-9ede4cf7', './mergeDeepWithKey-aaab9019', './_curry3-83878f86', './_curry2-86c52b86', './_isObject-42bafc94', './useDensity-27fffd88', 'preact', './Common/themes/redwood/theme', './UNSAFE_Layer/themes/LayerHostStyles.css', 'css!./LayerHostStyles.styles.css', './head-9cb1a3da', './_arity-5a5f5f71', './_isArray-32602db6', './_isString-d0ada3cb', './useBreakpoints-52d11a72', './useVisAddBusyState-2d2ccb92', './VisBusyStateContext-63467849', './useVisBusyStateContext-7b0606e7', './logger-0f873e29', './UNSAFE_DrawerLayout/themes/DrawerLayoutStyles.css', 'css!./DrawerLayoutStyles.styles.css', './UNSAFE_DrawerLayout/themes/redwood/DrawerLayoutBaseTheme.css', 'module', './UNSAFE_DrawerLayout/themes/redwood/DrawerLayoutVariants.css'], (function(e,t,s,r,a,n,o,c,l,i,u,d,f,m,h,y,w,p,b,g,A,R,D,S,L,v,E,x,O,C,U,k,F,_,N,T,H,I,B,V,z,j,G,W,X,M,Y,K,P,$,q,J,Q,Z,ee,te,se,re,ae,ne,oe,ce,le,ie,ue,de,fe,me){"use strict";e.DrawerLayout=({children:e,startDrawer:o,endDrawer:c,bottomDrawer:g,isStartOpen:A=!1,isEndOpen:R=!1,isBottomOpen:D=!1,startDisplay:S,endDisplay:L,bottomDisplay:v,onClose:E,onTransitionEnd:x,testId:O})=>{const C="0px",U="start",k="end",F="bottom",_="initial",N="opening",T="closing",H="unmounted",I="full-overlay",B="overlay",V="reflow",z="hidden",[j,G]=s.useState(A?_:H),[W,X]=s.useState(R?_:H),[M,Y]=s.useState(D?_:H),[K,P]=s.useState(z),[$,q]=s.useState(z),[J,Q]=s.useState(z),[Z,ee]=s.useState(),[te,se]=s.useState(),[re,ae]=s.useState(),ne=h.useBreakpointValues({sm:I,md:B,lg:V}),[oe,ce]=s.useState(ne),[le,ie]=s.useState(ne),ue=s.useRef(null),de=s.useRef(null),fe=s.useRef(null),me=s.useRef(null),he=s.useRef(null),ye=s.useRef(null),we=s.useRef(null),pe=s.useRef(null),be=s.useRef(null),ge=s.useRef(null),Ae=s.useRef(null),[Re,De]=s.useState(null),[Se,Le]=s.useState(null),[ve,Ee]=s.useState(null),xe=s.useCallback((e=>We(e).current),[]),Oe=s.useCallback((()=>{const e=xe(U),t=xe(k),s=xe(F),r=l.getActiveElement();return e&&e.contains(r)?U:t&&t.contains(r)?k:s&&s.contains(r)?F:null}),[xe]),Ce=s.useCallback((()=>{if(A||R||D){const e=Oe();if(e){ye.current=e;const t=l.allTabbableElements(We(ye.current).current,!0);we.current=t.indexOf(l.getActiveElement())}}}),[Oe,A,D,R]),Ue=s.useCallback((e=>{let t=!1;switch(e){case U:t=A;break;case k:t=R;break;case F:t=D}return t}),[A,R,D]);s.useEffect((()=>{const e=ye.current;if(e){const t=We(e);if(t.current&&Ue(e)){const e=l.allTabbableElements(t.current,!0);null!=we.current&&e.length>we.current?l.focusOn(e[we.current]):l.focusWithin(t.current),ye.current=null,we.current=null}}}),[Re,Se,ve,Ue]),s.useEffect((()=>{Ce(),setTimeout((()=>{ce(ne)}),0)}),[ne,Ce]);const ke=e=>e?Math.round(e.offsetHeight):0,Fe=s.useCallback((e=>`${ke(e)}px`),[]),_e=s.useCallback((e=>e?Math.round(e.getBoundingClientRect().width):0),[]),Ne=s.useCallback((e=>`${_e(e)}px`),[_e]),{direction:Te}=f.useUser(),He="ltr"===Te,Ie=s.useCallback((e=>r.normalizePosition(e,Te)),[Te]),Be=e=>[U,k].indexOf(e)>-1,Ve=e=>e===F,ze=e=>[N,T].indexOf(e)>-1,je=e=>{switch(e){case U:return ze(j);case k:return ze(W);case F:return ze(M)}},Ge=(e,t)=>{switch(e){case U:return P(t);case k:return q(t);case F:return Q(t)}},We=e=>{switch(e){case U:return fe;case k:return me;case F:return he}},Xe=e=>{switch(e){case U:return Ze;case k:return et;case F:return tt}},Me=e=>{switch(e){case U:return j;case k:return W;case F:return M}},Ye=(e,t)=>{switch(e){case U:G(t);break;case k:X(t);break;case F:Y(t)}},Ke=e=>{switch(e){case U:Ze(null);break;case k:et(null);break;case F:tt(null)}},Pe=s.useCallback((e=>{switch(e){case U:return S;case k:return L;case F:return v}}),[S,L,v]),$e=s.useCallback((e=>{const t=Pe(e);return t||(Be(e)?oe:le)}),[Pe,oe,le]),qe=e=>({expandVertically:{from:{maxHeight:C},to:{maxHeight:"100%"},options:{duration:d.DURATION_LARGE}},collapseVertically:{from:{maxHeight:"100%"},to:{maxHeight:C},options:{duration:d.DURATION_LARGE}},expandHorizontally:()=>({from:{maxWidth:C},to:{maxWidth:Ne(e.current)},options:{duration:d.DURATION_LARGE}}),collapseHorizontally:()=>({from:{maxWidth:Ne(e.current)},to:{maxWidth:C},options:{duration:d.DURATION_LARGE}}),slideUp:{from:{translateY:"100%"},to:{translateY:C},options:{duration:d.DURATION_LARGE}},slideDown:{from:{translateY:C},to:{translateY:"100%"},options:{duration:d.DURATION_LARGE}},slideOpenLeft:{from:{translateX:"-100%"},to:{translateX:C},options:{duration:d.DURATION_LARGE}},slideCloseLeft:{from:{translateX:"0"},to:{translateX:"-100%"},options:{duration:d.DURATION_LARGE}},slideOpenRight:{from:{translateX:"100%"},to:{translateX:C},options:{duration:d.DURATION_LARGE}},slideCloseRight:{from:{translateX:"0"},to:{translateX:"100%"},options:{duration:d.DURATION_LARGE}}}),Je=e=>{We(e).current?.contains(Ae.current)&&l.focusOnElementOrNearestAncestor((e=>{switch(e){case U:return pe;case k:return be;case F:return ge}})(e).current)};function Qe(e,t){const s=Ue(e),r=Me(e);return u.useAnimation((e=>{const t=Ve(e),s=Me(e);return $e(e)===V?t?"opening"===s?"expandVertically":"closing"===s?"collapseVertically":"":"opening"===s?"expandHorizontally":"closing"===s?"collapseHorizontally":"":t?"opening"===s?"slideUp":"closing"===s?"slideDown":"":"opening"===s?"left"===Ie(e)?"slideOpenLeft":"slideOpenRight":"closing"===s?"left"===Ie(e)?"slideCloseLeft":"slideCloseRight":""})(e),{animationStates:qe(t),isAnimatedOnMount:!0,onAnimationEnd:()=>{r===N?(dt(e)&&(e=>{const t=We(e),s=l.getAutofocusFocusables(t.current);s.length>0?l.focusOn(s[0]):l.focusWithin(t.current)})(e),(e=>{We(e).current.removeAttribute("style")})(e),Ke(e),Ye(e,"open"),x?.({placement:e,value:!0})):s||(dt(e)&&Je(e),Ke(e),Ge(e,z),Ye(e,H),x?.({placement:e,value:!1}))}}).nodeRef}const Ze=Qe(U,fe),et=Qe(k,me),tt=Qe(F,he),st=m.useTestId(O);function rt(e){const t=Ue(e),r=Me(e);s.useEffect((()=>{if(r!==H||t)if(r===H&&t)Ye(e,_);else{if(r===_&&t){const t=We(e);return Xe(e)(t.current),void Ye(e,N)}if(r===N&&t)return Ge(e,"visible"),void(e=>{const t=l.getActiveElement();switch(e){case U:pe.current=t;break;case k:be.current=t;break;case F:ge.current=t}})(e);if(!t){const t=We(e);Xe(e)(t.current),Ae.current=l.getActiveElement(),Ye(e,T)}}}),[t,r,e])}rt(U),rt(k),rt(F);const at=e=>{ct(U,e)},nt=e=>{ct(k,e)},ot=e=>{ct(F,e)},ct=(e,t)=>{"Escape"===t.code&&dt(e)&&E?.({placement:e,reason:"escapeKey"})},{classes:lt,styles:it}=w.useComponentTheme(b.DrawerLayoutRedwoodTheme),ut=e=>e===z?it.visibilityHidden:it.visibilityVisible,dt=s.useCallback((e=>[I,B].indexOf($e(e))>-1),[$e]),ft=e=>$e(e)===I,mt=e=>{const t=(e=>{switch(e){case U:return K;case k:return $;case F:return J}})(e),s=[ut(t)];dt(e)?(s.push(it.overlayDrawer),Be(e)&&!ft(e)&&s.push(it.overlaySideDrawerNonFullWidth)):s.push(it.reflowDrawer),je(e)&&s.push(it.animatedDrawer);return s.push((e=>{switch(e){case U:return dt(U)?He?it.overlayDrawerLeft:it.overlayDrawerRight:He?it.reflowDrawerLeft:it.reflowDrawerRight;case k:return dt(k)?He?it.overlayDrawerRight:it.overlayDrawerLeft:He?it.reflowDrawerRight:it.reflowDrawerLeft;case F:return dt(F)?it.overlayDrawerBottom:it.reflowDrawerBottom}})(e)),p.classNames(s)},ht=e=>{switch(e){case U:return o;case k:return c;case F:return g}},yt=e=>{switch(e){case U:return at;case k:return nt;case F:return ot}},wt=e=>t.jsx("div",{ref:We(e),className:mt(e),tabIndex:dt(e)?-1:void 0,onKeyDown:yt(e),children:ht(e)}),pt=i.getClientHints(),bt=s.useCallback((()=>"ios"===pt.platform?document.documentElement.clientHeight:window.innerHeight),[pt.platform]),gt=e=>{setTimeout((()=>{e()}),0)},At=s.useCallback((()=>{bt()>=600?le!=V&&(Ce(),ie(V)):le!=B&&(Ce(),ie(B))}),[le,bt,Ce]),Rt=s.useCallback((()=>{gt(At)}),[At]);s.useEffect((()=>{const e=new ResizeObserver((()=>{Rt()}));return e.observe(document.body),()=>{e.unobserve(document.body)}}),[Rt]);const Dt=e=>{switch(e){case U:return Z;case k:return te;case F:return re}},St=s.useCallback((e=>{const t=Fe(de.current),s=We(e).current;s&&Ue(e)&&dt(e)&&(s.style.height=t)}),[Fe,Ue,dt]),Lt=s.useCallback((()=>{const e=he.current;if(e&&Ue(F)&&dt(F)){const t=Ne(de.current);e.style.width=t}}),[Ne,Ue,dt]),vt=e=>{Be(e)&&(St(e),(e=>{const t=We(e).current;if(t&&Ue(e)){const s=t.style;ft(e)?s.width=Ne(ue.current):s.removeProperty("width")}})(e)),Ve(e)&&Lt()},Et=s.useCallback((()=>{St(U),St(k),Lt()}),[St,Lt]);y.useResizeObserver(ue,(()=>{gt(Et)}));const xt=e=>{if(dt(e)){const t=(e=>{const t=xe(e);return t?Be(e)?-_e(t):-ke(t):0})(e);switch(e){case U:ee(t);break;case k:se(t);break;case F:ae(t)}}},Ot=()=>{xt(U),Lt()};y.useResizeObserver(fe,(()=>{gt(Ot)}));const Ct=()=>{xt(k),Lt()};y.useResizeObserver(me,(()=>{gt(Ct)}));const Ut=()=>{xt(F)};y.useResizeObserver(he,(()=>{gt(Ut)}));const kt=e=>{const t=$e(e);if((e=>{switch(e){case U:return Re;case k:return Se;case F:return ve}})(e)!=t){switch(e){case U:De(t);case k:Le(t);case F:Ee(t)}Ce()}},Ft=e=>Me(e)!==H?(e=>{const s={mainAxis:!1,crossAxis:!1},r={mainAxis:!1,crossAxis:!1};return kt(e),dt(e)?(vt(e),Dt(e)||xt(e),t.jsx("div",{children:t.jsx(n.Layer,{children:t.jsx(a.Floating,{anchorRef:e===F?de:ue,placement:e,class:je(e)?it.floating:"",offsetValue:Dt(e),flipOptions:r,shiftOptions:s,children:wt(e)})})})):wt(e)})(e):null;return t.jsxs("div",{ref:ue,className:lt,...st,children:[Ft(U),t.jsxs("div",{ref:de,className:it.centerSection,children:[t.jsx("div",{className:it.mainContent,children:e}),Ft(F)]}),Ft(k)]})},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_DrawerLayout.js.map
